<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.ta.orderby.admin.model.mapper.AdminMapper">
	<sql id="selectadminmembersql">
		SELECT M_NO,
       		   M_ID,
		       M_PASSWORD,
		       M_NAME,
		       M_BIRTH,
		       M_EMAIL,
		       M_PHONE,
		       M_GENDER,
		       M_ADDRESS,
		       M_DETAIL_ADD,
		       M_POINT,
		       M_ROLE,
		       M_ENROLL_DATE,
		       M_MODIFY_DATE,
		       M_STATUS,
		       M_CNUM,
		       M_PCOUNT
		FROM MEMBER
	</sql>
	
		<resultMap id="AdminMemberResultMap" type="AdminMember">
		<id property="no" column="M_NO"/>
		<result property="id" column="M_ID"/>
		<result property="password" column="M_PASSWORD"/>
		<result property="name" column="M_NAME"/>
		<result property="birth" column="M_BIRTH"/>
		<result property="email" column="M_EMAIL"/>
		<result property="phone" column="M_PHONE"/>
		<result property="gender" column="M_GENDER"/>
		<result property="address" column="M_ADDRESS"/>
		<result property="detailAdd" column="M_DETAIL_ADD"/>
		<result property="point" column="M_POINT"/>
		<result property="role" column="M_ROLE"/>
		<result property="enrollDate" column="M_ENROLL_DATE"/>
		<result property="modifyDate" column="M_MODIFY_DATE"/>
		<result property="status" column="M_STATUS"/>
		<result property="cnum" column="M_CNUM"/>
		<result property="pcount" column="M_PCOUNT"/>
	</resultMap>
	
	
	<select id="selectAdminMemberCount" resultType="_int">
		SELECT COUNT(*) FROM MEMBER WHERE M_STATUS='Y'
	</select>
	
	<select id="selectAll" resultMap="AdminMemberResultMap">
		<include refid="selectadminmembersql"/>
		WHERE M_STATUS='Y' ORDER BY M_NO DESC
	</select>
	
	<select id="selectAdminMemberByNo" parameterType="_int" resultMap="AdminMemberResultMap">
		SELECT * FROM MEMBER WHERE M_STATUS='Y' AND M_NO = #{no}
	</select>
	
	<update id="updateMemberStatus" parameterType="map">
		UPDATE MEMBER SET M_STATUS = #{status} WHERE M_NO = #{no}	
	</update>
	
	<update id="updateAdminMember" parameterType="AdminMember">
		UPDATE MEMBER
		SET	
			M_ID = #{id},
			M_PASSWORD = #{password},
			M_NAME = #{name},
			M_POINT = #{point},
			M_ROLE = #{role},
			M_BIRTH = #{birth},
			M_PHONE = #{phone},
			M_EMAIL = #{email},
			M_ADDRESS = #{address},
			M_DETAIL_ADD = #{detailAdd}
		WHERE M_NO = #{no}
	</update>
	
		<sql id="selectpopqnasql">
		SELECT POP_NO,
       		   POP_TITLE,
		       POP_CONTENT,
		       POP_DATE,
		       POP_STATUS,
		       POP_PHONE
		FROM POPQNA
	</sql>
	
	<resultMap id="popqnaResultMap" type="AdminPopqna">
		<id property="no" column="POP_NO"/>
		<result property="title" column="POP_TITLE"/>
		<result property="content" column="POP_CONTENT"/>
		<result property="enrolldate" column="POP_DATE"/>
		<result property="status" column="POP_STATUS"/>
		<result property="phone" column="POP_PHONE"/>
	</resultMap>
	
	<select id="selectPopqnaCount" resultType="_int">
		SELECT COUNT(*) FROM POPQNA WHERE POP_STATUS = 'N' OR POP_STATUS = 'Y'
	</select>
	
	<select id="popqnaselectAll" resultMap="popqnaResultMap">
		<include refid="selectpopqnasql"/>
			 WHERE POP_STATUS = 'N' OR POP_STATUS = 'Y' ORDER BY POP_NO DESC
	</select>
	
	<select id="selectPopqnaByNo" parameterType="_int" resultMap="popqnaResultMap">
		SELECT * FROM POPQNA WHERE POP_NO = #{no}
	</select>
	
		<update id="checkPopqnaStatus" parameterType="map">
		UPDATE POPQNA SET POP_STATUS = #{status} WHERE POP_NO = #{no}	
	</update>
	
		<sql id="selectcarproductsql">
		SELECT  C_NO,
				C_NAME,
				C_MILE,
				C_KM,
				C_CC,
				C_YEAR,
				C_ENGINE,
				C_BRAND,
				C_FUEL,
				C_PRICE,
				C_POSITION,
				C_STATUS,
				C_SALE,
				S_NO,
				PF_NO,
				C_COUNT,
				C_ENROLL_DATE
		FROM CAR
	</sql>
	
	<resultMap id="AdminCarResultMap" type="AdminProductCar">
		<id property="no" column="C_NO"/>
		<result property="name" column="C_NAME"/>
		<result property="mile" column="C_MILE"/>
		<result property="km" column="C_KM"/>
		<result property="cc" column="C_CC"/>
		<result property="year" column="C_YEAR"/>
		<result property="engine" column="C_ENGINE"/>
		<result property="brand" column="C_BRAND"/>
		<result property="fuel" column="C_FUEL"/>
		<result property="price" column="C_PRICE"/>
		<result property="position" column="C_POSITION"/>
		<result property="status" column="C_STATUS"/>
		<result property="sale" column="C_SALE"/>
		<result property="sno" column="S_NO"/>
		<result property="pfno" column="PF_NO"/>
		<result property="count" column="C_COUNT"/>
		<result property="enrolldate" column="C_ENROLL_DATE"/>
	</resultMap>
	
	<select id="selectAdminCarCount" resultType="_int">
		SELECT COUNT(*) FROM CAR WHERE C_STATUS='Y'
	</select>
	
	<select id="productcarselectAll" resultMap="AdminCarResultMap">
		<include refid="selectcarproductsql"/>
			 WHERE C_STATUS = 'N' OR C_STATUS = 'Y' ORDER BY C_NO DESC
	</select>
	
	<select id="selectCarProductNo" parameterType="_int" resultMap="AdminCarResultMap">
		SELECT * FROM CAR WHERE C_NO = #{no}
	</select>
	
	<update id="updateCarproductStatus" parameterType="map">
		UPDATE CAR SET C_STATUS = #{status} WHERE C_NO = #{no}	
	</update>
	
	<update id="updateProductCar" parameterType="AdminProductCar">
	UPDATE CAR
		SET	
			C_NAME = #{name},
			C_BRAND = #{brand},
			C_ENGINE = #{engine},
			C_CC = #{cc},
			C_FUEL = #{fuel},
			C_PRICE = #{price},
			C_POSITION = #{position},
			C_KM = #{km},
			C_SALE = #{sale}
		WHERE C_NO = #{no}
	</update>

	
	<sql id="selectmotocycleproductsql">
		SELECT  MC_NO,
				MC_NAME,
				MC_BRAND,
				MC_ENGINE,
				MC_CC,
				MC_OUTPUT,
				MC_TORQUE,
				MC_FUEL,
				MC_YEAR,
				MC_KM,
				MC_PRICE,
				MC_POSITION,
				MC_STATUS,
				MC_SALE,
				S_NO,
				PF_NO,
				MC_COUNT,
				MC_ENROLL_DATE
		FROM MOTOCYCLE
	</sql>
	
	<resultMap id="AdminMotocycleResultMap" type="AdminProductMotocycle">
		<id property="no" column="MC_NO"/>
		<result property="name" column="MC_NAME"/>
		<result property="brand" column="MC_BRAND"/>
		<result property="engine" column="MC_ENGINE"/>
		<result property="cc" column="MC_CC"/>
		<result property="output" column="MC_OUTPUT"/>
		<result property="torque" column="MC_TORQUE"/>
		<result property="fuel" column="MC_FUEL"/>
		<result property="year" column="MC_YEAR"/>
		<result property="km" column="MC_KM"/>
		<result property="price" column="MC_PRICE"/>
		<result property="position" column="MC_POSITION"/>
		<result property="status" column="MC_STATUS"/>
		<result property="sale" column="MC_SALE"/>
		<result property="sno" column="S_NO"/>
		<result property="pfno" column="PF_NO"/>
		<result property="count" column="MC_COUNT"/>
		<result property="enrolldate" column="MC_ENROLL_DATE"/>
	</resultMap>
	
	<select id="selectAdminMotocycleCount" resultType="_int">
		SELECT COUNT(*) FROM MOTOCYCLE WHERE MC_STATUS='Y'
	</select>
	
	<select id="productmotocylceselectAll" resultMap="AdminMotocycleResultMap">
		<include refid="selectmotocycleproductsql"/>
			 WHERE MC_STATUS = 'N' OR MC_STATUS = 'Y' ORDER BY MC_NO DESC
	</select>
	
	<select id="selectMotoProductNo" resultType="_int" resultMap="AdminMotocycleResultMap">
			SELECT * FROM MOTOCYCLE WHERE MC_NO = #{no}
	</select>
	
	<update id="updateMotoproductStatus" parameterType="map">
		UPDATE MOTOCYCLE SET MC_STATUS = #{status} WHERE MC_NO = #{no}	
	</update>
	
	
	<update id="updateProductMotocycle" parameterType="AdminProductMotocycle">
		UPDATE MOTOCYCLE
		SET	
			MC_NAME = #{name},
			MC_BRAND = #{brand},
			MC_ENGINE = #{engine},
			MC_CC = #{cc},
			MC_OUTPUT = #{output},
			MC_TORQUE = #{torque},
			MC_PRICE = #{price},
			MC_POSITION = #{position},
			MC_KM = #{km},
			MC_SALE = #{sale}
		WHERE MC_NO = #{no}
	</update>
	
</mapper>